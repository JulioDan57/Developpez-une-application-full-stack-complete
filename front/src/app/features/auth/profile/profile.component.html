<h1 class="title">Profil utilisateur</h1>

<form class="form" [formGroup]="profileForm" (ngSubmit)="saveProfile()">

  <mat-form-field appearance="outline">
    <mat-label>Nom d’utilisateur</mat-label>
    <input matInput formControlName="username" />
    <mat-error *ngIf="profileForm.get('username')?.hasError('required')">
      Champ obligatoire
    </mat-error>
    <mat-error *ngIf="profileForm.get('username')?.hasError('minlength')">
      Minimum 3 caractères
    </mat-error>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Adresse e-mail</mat-label>
    <input matInput formControlName="email" />
    <mat-error *ngIf="profileForm.get('email')?.hasError('required')">
      Champ obligatoire
    </mat-error>
    <mat-error *ngIf="profileForm.get('email')?.hasError('email')">
      Email invalide
    </mat-error>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Mot de passe</mat-label>
    <input matInput type="password" formControlName="password" />
    <mat-error *ngIf="profileForm.get('password')?.hasError('required')">
      Champ obligatoire
    </mat-error>

    <mat-error *ngIf="profileForm.get('password')?.hasError('pattern')">
        Le mot de passe doit avoir au moins 8 caractères (au moins une 
        minuscule, une majuscule, un chiffre et un caractère spécial).
    </mat-error>    
  </mat-form-field>

  <button
    mat-button
    class="submit-btn"
    type="submit"
    [disabled]="profileForm.invalid"
  >
    Sauvegarder
  </button>

</form>

<hr class="divider" />

<div class="extra-section">
  <div class="subjects">
    <div class="subscribed-subjects" *ngFor="let subject of subjects">
      <h3 class="subject-title">{{ subject.subjectName }}</h3>
      <p class="content">{{ subject.subjectDescription }}</p>

      <button
        mat-raised-button
        color="primary"
        (click)="unsubscribe(subject)"
      >
        Se désabonner
      </button>
    </div>
  </div>
</div>

